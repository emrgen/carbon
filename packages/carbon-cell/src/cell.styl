$active-cell-color = #e3e9f3
$cell-code-color = #f5f5f5

.cell-insert-neighbour
    opacity 0
    position absolute;
    //right calc(100% + 22px)
    background #eee
    padding 3px
    border-radius 4px
    transition all 0.2s
    cursor pointer
    &:after
        content ''
        position absolute;
        width 100%
        height 100%
        left 5px
        top 0
        background transparent

.cell-insert-neighbour
.carbon-cell-handle
    &:hover
        background #ddd
[data-name=cell]
    position relative;
    flex-direction column
    width calc(100%)
    left -0px
    margin 6px 0
    &:hover
        .carbon-cell-handle
            background #eee
        .cell-view-handle
            opacity 1
        .cell-insert-neighbour
            opacity 1

    .carbon-cell-handle
        &:hover
            background #ddd
    &[data-focused=true]
        .cm-editor
            background $active-cell-color
        .cell-insert-neighbour
            opacity 1

    .cell-code-wrapper
        flex 1
        position relative;
        border-radius 6px
        [data-name=codeMirror]
            margin 0
            border-radius 0!important

    [data-name=cellView]
        min-height 40px
        background #fff
        z-index 100
        flex 1
    .cm-scroller
        font-size 15px
        font-family Geist Mono, monospace!important;

    .cm-editor
        background $cell-code-color
        border-radius 4px
        padding 0 0 0 0!important
        &.cm-focused
            background $active-cell-color

    .cm-activeLine.cm-line
        background: transparent!important

    .cm-gutters
       display none !important

    .cm-editor.cm-focused
        border none
        outline none !important
        background: rgba(172, 191, 255, 0.14);
        transition background ease 0.1s

    .cm-line
        padding 2px 12px !important

.carbon-cell-container
    display flex
    flex-direction column
    gap 1px
    position: relative;
    z-index 1
    &:hover .carbon-cell-handle
        opacity 1
        z-index 2

.carbon-cell-handle[data-focused=true]
    opacity 1
    z-index 2
    background #eee
    &:hover
        .cell-view-handle
            opacity 1

[data-name=cell][data-focused=true]
    .cm-activeLine.cm-line
        position relative;
        background: transparent!important
    .cm-activeLine.cm-line::before
        background #aaa
        width 4px
        height 80%
        content: ''
        position absolute
        left 0
        top 10%
        border-radius 4px
    .cell-view-handle
        opacity 1

.cell-view-handle
    opacity 0
    padding-top 8px;
    user-select none
    transition all 0.2s
.cell-code-handle
    display flex
    padding-top 3px;
    user-select none
    justify-content center
    font-weight bold

.carbon-cell-handle
    position absolute;
    top 0
    height 100%
    right 100%
    width: 20px;
    display flex;
    border-right 2px solid #fff // create a gap between cell and the handle
    transition all 0.2s
    background transparent
    color #aaa
    text-align center
    justify-content center
    cursor pointer
    border-radius 4px
    &:hover
        background: #ddd
    .cell-code-handle
        flex 1

.carbon-cell-insert-before
    border-radius 4px
    background: rgba(238, 238, 238, 0.75);
    cursor pointer
    text-align center
    color #aaa
    font-size 14px
    user-select none

.carbon-cell-view
    //display flex
    //flex-direction row
    border-radius 4px
    position relative;
    flex 1
    //width 100%;
    padding 0 10px

.carbon-cell-code
    position relative;
    display flex
    width 100%;
    .carbon-cell-code
        border-bottom-left-radius 0

    .props
        width 100%

.carbon-cell-compute-button
    position absolute;
    right 4px
    top 3px
    z-index 100
    border-radius 4px
    padding 4px
    cursor pointer
    color #aaa
    &:hover
        color #000

.cell-view
    padding 6px 2px
    overflow-x auto

.cell-html-result
    line-height 0.8em
    //padding-bottom 10px;
    h1
        font-size 2em
        line-height 20px
        margin 4px 0 10px 0
        padding 0
        font-weight 500
    h2
        font-size 1.6em
        line-height 20px
        margin 4px 0 10px 0
        padding 0
        font-weight 500
    h3
        font-size 1.2em
        line-height 20px
        margin 4px 0 10px 0
        padding 0
        font-weight 500
    p
        line-height 20px
        margin-bottom 2px;
    ul
        line-height 14px
        margin 0
        padding-left 16px;
        li
            margin 0
            padding 0
            line-height 20px
    //pre

.cell-view-error
    color red
    font-weight 500
    padding 4px 2px
    margin 0

.cell-view-result
    width 100%;
    overflow hidden

    input[type=text]
        width 100%
        background #f5f5f5
        padding 4px
        border-radius 4px
        font-size 14px
        font-family Geist Mono, monospace!important;
        border 1px solid #ccc
        max-width 200px;
        &:focus
            outline 0
            border 1px solid #aaa

.cell-result
    display flex
    position relative;
    min-height 31px
    //padding 0 0px
    align-items center
    .cell-loading[data-loading=true]
        position absolute;
        height 100%
        width 4px
        left 0
        top 0
        background #ddd
        border-radius 2px
        animation spinner 1.5s linear infinite
@keyframes spinner {
    0% { background: #ddd; }
    50% { background: #aaa; }
    100% { background: #ddd; }
}

.cell-result-cell-name
    display flex
    align-items center
    height 28px
    white-space nowrap

.cell-result-named-view
    display flex
    font-family "Geist Mono", monospace

.cell-result-view-wrapper
    flex 1

.cell-result-object
    overflow auto
.cell-result
    button
        margin 0 4px
        padding 2px 8px
        border-radius 4px
        cursor pointer
        font-size 4px
        font-weight bold
        background #eee
        transition background-color 0.2s
        user-select none
        &:hover
            background #ddd